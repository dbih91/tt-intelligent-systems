import{d as M,m as U,u as $,o as i,c as r,e as B,v as F,a as t,f as u,g as j,h as D,i as L,b as R,j as A,F as y,k as N,l as w,t as h,n as E,p as q}from"./index-D5uycLo0.js";import{u as z}from"./useApi-DogpEXjf.js";const G={class:"tt-input-search"},H=["placeholder"],J=M({__name:"InputSearch",props:U({placeholder:{default:"Search"}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const n=$(m,"modelValue");return(a,s)=>(i(),r("label",G,[B(t("input",{class:"tt-input-search__input","onUpdate:modelValue":s[0]||(s[0]=o=>n.value=o),type:"search",placeholder:a.placeholder},null,8,H),[[F,n.value]]),s[1]||(s[1]=t("span",{class:"tt-input-search__detail"}," ðŸ” ",-1))]))}});function K(m,n){let a;return function(...s){const o=this;return clearTimeout(a),a=window.setTimeout(function(){m.apply(o,s)},n),()=>window.clearTimeout(a)}}function O(m){const n=m.split("/"),a=n[n.length-2],s=+a;return a===""||isNaN(s)?1:s}const Q={class:"tt-starships-page"},W={class:"tt-starships-list"},X={key:0,class:"tt-starships-list__item",disabled:""},Y={key:0},Z={key:1},ee=["onClick"],te={class:"tt-starships-list__info"},se={class:"tt-starships-pagination"},ae=["disabled"],le=["disabled"],ie=M({__name:"StarshipsPage",setup(m){const n=z(),a=E(),s=q(),o=u(""),p=u(!1),c=u([]),_=u(0),f=u(0),x=u(0),v=j(()=>{const l=+a.params.pageId;return a.params.pageId===""||isNaN(l)?1:l}),g=u(!1),S=u(!1),b=u(""),T=K(k,250);D(o,()=>{if(b.value!==o.value){if(v.value!==1)return V(1);T()}});async function k(){p.value=!0;try{b.value=o.value;const e=await(await n.starships.get(v.value,b.value)).json();c.value=e.results||[],_.value=c.value.length,f.value=e.count,x.value=Math.ceil(f.value/10),S.value=!!e.next,g.value=!!e.previous}catch(l){console.error(l)}finally{p.value=!1}}function V(l){c.value=[],_.value=10,S.value=!1,g.value=!1,p.value=!0,s.push({name:"Starships",params:{pageId:l.toString()}}).then(()=>{k()})}function C(){V(v.value-1)}function I(){V(v.value+1)}function P(l){s.push({name:"Starship",params:{starshipId:O(l)}})}return L(()=>{k()}),(l,e)=>(i(),r("div",Q,[e[4]||(e[4]=t("h2",null,"Starships",-1)),R(J,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=d=>o.value=d),placeholder:"Search Starship"},null,8,["modelValue"]),t("div",W,[p.value||c.value.length===0?(i(),r("button",X,[c.value.length===0?(i(),r("span",Y,"Loading...")):(i(),r("span",Z,"Nothing was found :(")),e[1]||(e[1]=t("sub",null,"-",-1))])):A("",!0),(i(!0),r(y,null,N(c.value,d=>(i(),r("button",{key:d.name,class:"tt-starships-list__item",onClick:ne=>P(d.url)},[t("span",null,h(d.name),1),t("sub",null,h(d.model),1)],8,ee))),128)),(i(!0),r(y,null,N(Math.max(10-c.value.length-+p.value,0),d=>(i(),r("button",{key:d,class:"tt-starships-list__item",disabled:""},e[2]||(e[2]=[t("span",null,"-",-1),t("sub",null,"-",-1)])))),128))]),t("span",te,[w(" Showing "+h(v.value*10-9)+" - "+h((v.value-1)*10+_.value)+" of "+h(f.value)+" results",1),e[3]||(e[3]=t("br",null,null,-1)),w(" Page "+h(v.value)+" of "+h(x.value),1)]),t("div",se,[t("button",{disabled:p.value||!g.value,onClick:C}," Previous ",8,ae),t("button",{disabled:p.value||!S.value,onClick:I}," Next ",8,le)])]))}});export{ie as default};
